<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRM Dashboard</title>
    
    <!-- ===== EXTERNAL DEPENDENCIES ===== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <!-- ===== LOADING SPINNER ===== -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- ===== SIDEBAR NAVIGATION ===== -->
    <div class="sidebar">
        <div class="logo">
            <span>CRM System</span>
        </div>
        <div class="nav-menu">
            <div class="nav-item active" data-section="freelance">
                <span>Freelance Projects</span>
            </div>
            <div class="nav-item" data-section="portfolio">
                <span>Portfolio Website</span>
            </div>
            <div class="nav-item" data-section="info">
                <span>Important Info</span>
            </div>
            <div class="nav-item" data-section="connections">
                <span>Connections</span>
            </div>
        </div>
    </div>

    <!-- ===== MAIN CONTENT AREA ===== -->
    <div class="main-content">
        <!-- ===== TOP BAR ===== -->
        <div class="top-bar">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search projects, clients, tasks..." />
            </div>
            <div class="user-actions">
                <div class="notification">
                    <i class="fas fa-bell"></i>
                    <div class="badge">3</div>
                </div>
                <div class="user-profile">
                    <div class="profile-img">AY</div>
                    <span>Anurag Yadav</span>
                </div>
            </div>
        </div>

        <!-- ===== FREELANCE PROJECTS SECTION ===== -->
        <div class="content-section" id="freelance-section">
            <!-- ===== STATUS BOXES ===== -->
            <div class="status-boxes">
                <div class="status-box all-projects">
                    <div class="status-icon">
                        <i class="fas fa-folder-open"></i>
                    </div>
                    <div class="status-info">
                        <div class="count">0</div>
                        <div class="label">All Projects</div>
                    </div>
                </div>
                <div class="status-box pending">
                    <div class="status-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="status-info">
                        <div class="count">0</div>
                        <div class="label">In Process</div>
                    </div>
                </div>
                <div class="status-box waiting">
                    <div class="status-icon">
                        <i class="fas fa-pause-circle"></i>
                    </div>
                    <div class="status-info">
                        <div class="count">0</div>
                        <div class="label">Pending</div>
                    </div>
                </div>
                <div class="status-box completed">
                    <div class="status-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="status-info">
                        <div class="count">0</div>
                        <div class="label">Completed</div>
                    </div>
                </div>
            </div>

            <!-- ===== PROJECTS SECTION WITH NOTES ===== -->
            <div class="projects-section">
                <!-- ===== PROJECTS TABLE ===== -->
                <div class="table-container">
                    <div class="projects-table-container" id="projectsTableContainer">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Project Name</th>
                                    <th>Client</th>
                                    <th>Start Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="projectsTableBody">
                                <!-- Projects dynamically loaded from Supabase -->
                            </tbody>
                        </table>
                    </div>
                    <div class="show-more-indicator" id="showMoreIndicator">
                        <i class="fas fa-chevron-down"></i> Scroll to see more projects
                    </div>
                </div>

                <!-- ===== NOTES BOX ===== -->
                <div class="notes-box">
                    <div class="add-project-btn">
                        <button id="open-project-btn" class="btn primary">
                            <i class="fas fa-plus"></i> Add Project
                        </button>
                    </div>

                    <div class="notes-header">
                        <h3>Project Notes</h3>
                    </div>
                    <div class="notes-content" id="notesContent">
                        <div class="note-item">
                            <p>Select a project to view notes</p>
                        </div>
                    </div>
                    <div class="notes-input">
                        <textarea id="noteTextarea" placeholder="Add a note..."></textarea>
                        <button id="addNoteBtn"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== PORTFOLIO WEBSITE SECTION ===== -->
        <div class="content-section hidden" id="portfolio-section">
            <!-- ===== PORTFOLIO STATS ===== -->
            <div class="portfolio-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number">1,234</div>
                        <div class="stat-label">Total Views</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number">567</div>
                        <div class="stat-label">Unique Visitors</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number">89</div>
                        <div class="stat-label">Resume Downloads</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number">45</div>
                        <div class="stat-label">Contact Requests</div>
                    </div>
                </div>
            </div>

            <!-- ===== PORTFOLIO CONTENT GRID ===== -->
            <div class="portfolio-content">
                <div class="content-grid">
                    <!-- ===== PORTFOLIO IMAGES CARD ===== -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>Portfolio Images</h3>
                            <button class="btn btn-primary" id="addPortfolioImageBtn">
                                <i class="fas fa-plus"></i> Add Image
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="portfolio-images-container" id="portfolioImagesContainer">
                                <!-- Portfolio images dynamically loaded from Supabase -->
                            </div>
                            <div class="show-more-indicator" id="portfolioImagesMore">
                                <i class="fas fa-chevron-down"></i> Scroll to see more images
                            </div>
                        </div>
                    </div>

                    <!-- ===== SKILLS & TECHNOLOGIES CARD ===== -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>Skills & Technologies</h3>
                            <button class="btn btn-primary" id="add-skill-btn">
                                <i class="fas fa-plus"></i> Add Skill
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="skills-grid-container" id="skillsListContainer">
                                <!-- Skills dynamically loaded from Supabase -->
                            </div>
                            <div class="show-more-indicator" id="skillsMoreIndicator">
                                <i class="fas fa-chevron-down"></i> Scroll to see more skills
                            </div>
                        </div>
                    </div>

                    <!-- ===== RECENT UPDATES CARD ===== -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>Recent Updates</h3>
                            <button class="btn btn-primary" id="add-update-btn">
                                <i class="fas fa-plus"></i> Add Update
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="updates-container" id="updatesContainer">
                                <!-- Updates dynamically loaded from Supabase -->
                            </div>
                            <div class="show-more-indicator" id="updatesMoreIndicator">
                                <i class="fas fa-chevron-down"></i> Scroll to see more updates
                            </div>
                        </div>
                    </div>

                    <!-- ===== TO-DO LIST CARD ===== -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>To-Do List</h3>
                            <button class="btn btn-primary" id="add-todo-btn">
                                <i class="fas fa-plus"></i> Add Task
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="todo-input-container" id="todoInputContainer" style="display: none">
                                <div class="todo-input-group">
                                    <input type="text" id="todoInput" class="todo-input" placeholder="Enter a new task..." maxlength="200" />
                                    <button class="btn primary" id="save-todo-btn">Add</button>
                                    <button class="btn secondary" id="cancel-todo-btn">Cancel</button>
                                </div>
                            </div>

                            <div class="todo-list-container" id="todoListContainer">
                                <div class="no-todos" id="noTodosMessage">
                                    <i class="fas fa-clipboard-list"></i>
                                    <p>No tasks yet. Add your first task to get started!</p>
                                </div>
                            </div>

                            <!-- Todo Statistics -->
                            <div class="todo-stats" id="todoStats" style="display: none">
                                <div class="todo-stat-item">
                                    <span class="stat-number" id="totalTasks">0</span>
                                    <span class="stat-label">Total</span>
                                </div>
                                <div class="todo-stat-item">
                                    <span class="stat-number" id="completedTasks">0</span>
                                    <span class="stat-label">Completed</span>
                                </div>
                                <div class="todo-stat-item">
                                    <span class="stat-number" id="pendingTasks">0</span>
                                    <span class="stat-label">Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== IMPORTANT INFO SECTION ===== -->
        <div class="content-section hidden" id="info-section">
            <div class="portfolio-header">
                <h1 class="page-title">Important Info</h1>
                <p class="page-description">Important information and resources</p>
            </div>
        </div>

        <!-- ===== CONNECTIONS SECTION ===== -->
        <div class="content-section hidden" id="connections-section">
            <div class="portfolio-header">
                <h1 class="page-title">Connections</h1>
                <p class="page-description">Manage your professional connections</p>
            </div>
        </div>
    </div>

    <!-- ===== PROJECT MODAL ===== -->
    <div id="project-modal" class="pj-modal hidden">
        <div class="pj-overlay" id="pjOverlay"></div>
        <div class="pj-dialog">
            <h3 id="pjTitle" class="pj-title">New Project</h3>
            <form id="project-form" class="pj-form">
                <div class="pj-row">
                    <label for="pj-name">Project Name</label>
                    <input id="pj-name" name="projectName" class="pj-input" type="text" placeholder="e.g. Logo Design" required />
                </div>
                <div class="pj-row">
                    <label for="pj-client">Client</label>
                    <input id="pj-client" name="client" class="pj-input" type="text" placeholder="Client name" required />
                </div>
                <div class="pj-row small-grid">
                    <div>
                        <label for="pj-start">Start Date</label>
                        <input id="pj-start" name="startDate" class="pj-input" type="date" required />
                    </div>
                    <div>
                        <label for="pj-status">Status</label>
                        <select id="pj-status" name="status" class="pj-input" required>
                            <option value="planned">To Start</option>
                            <option value="in-process">In Process</option>
                            <option value="waiting">Pending</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>
                <div class="pj-actions">
                    <button type="button" class="btn secondary" id="project-cancel-btn">Cancel</button>
                    <button type="submit" class="btn primary" id="project-save-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== PORTFOLIO IMAGE MODAL ===== -->
    <div id="portfolio-image-modal" class="pj-modal hidden">
        <div class="pj-overlay" id="portfolioImageOverlay"></div>
        <div class="pj-dialog" style="max-width: 500px">
            <h3 id="portfolioImageTitle" class="pj-title">Add Portfolio Image</h3>
            <form id="portfolio-image-form" class="pj-form">
                <div class="pj-row">
                    <label for="portfolioImageInput">Image</label>
                    <div class="image-upload-container">
                        <input type="file" id="portfolioImageInput" accept="image/*" class="hidden" />
                        <div class="image-preview" id="portfolioImagePreview">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>Click to upload image</span>
                        </div>
                        <button type="button" class="btn secondary" id="portfolioUploadTrigger">Choose Image</button>
                    </div>
                </div>
                <div class="pj-row">
                    <label for="portfolioImageUrl">Image URL</label>
                    <input id="portfolioImageUrl" name="imageUrl" class="pj-input" type="url" placeholder="https://example.com" required />
                </div>
                <div class="pj-row">
                    <label for="portfolioImageSize">Image Size</label>
                    <input id="portfolioImageSize" name="imageSize" class="pj-input" type="text" placeholder="e.g., 1920x1080, 800x600" required />
                </div>
                <div class="pj-row">
                    <label for="portfolioImageTitleInput">Image Title</label>
                    <input id="portfolioImageTitleInput" name="imageTitle" class="pj-input" type="text" placeholder="Enter image title" required />
                </div>
                <div class="pj-actions">
                    <button type="button" class="btn secondary" id="portfolioImageCancel">Cancel</button>
                    <button type="submit" class="btn primary" id="portfolioImageSave">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== SKILL MODAL ===== -->
    <div id="skill-modal" class="pj-modal hidden">
        <div class="pj-overlay" id="skillOverlay"></div>
        <div class="pj-dialog" style="max-width: 400px">
            <h3 id="skillTitle" class="pj-title">Add Skill</h3>
            <form id="skill-form" class="pj-form">
                <div class="pj-row">
                    <label for="skill-name">Skill Name</label>
                    <input id="skill-name" name="skillName" class="pj-input" type="text" placeholder="e.g., React, JavaScript, Figma" required />
                </div>
                <div class="pj-actions">
                    <button type="button" class="btn secondary" id="skill-cancel-btn">Cancel</button>
                    <button type="submit" class="btn primary" id="skill-save-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== UPDATE MODAL ===== -->
    <div id="update-modal" class="pj-modal hidden">
        <div class="pj-overlay" id="updateOverlay"></div>
        <div class="pj-dialog" style="max-width: 500px">
            <h3 id="updateTitle" class="pj-title">Add Update</h3>
            <form id="update-form" class="pj-form">
                <div class="pj-row">
                    <label for="update-title">Update Title</label>
                    <input id="update-title" name="updateTitle" class="pj-input" type="text" placeholder="e.g., Project Milestone Completed" required />
                </div>
                <div class="pj-row small-grid">
                    <div>
                        <label for="update-date">Date</label>
                        <input id="update-date" name="updateDate" class="pj-input" type="date" required />
                    </div>
                    <div>
                        <label for="update-time">Time</label>
                        <input id="update-time" name="updateTime" class="pj-input" type="time" required />
                    </div>
                </div>
                <div class="pj-row">
                    <label for="update-icon">Icon</label>
                    <select id="update-icon" name="updateIcon" class="pj-input" required>
                        <option value="fas fa-edit">Edit</option>
                        <option value="fas fa-check-circle">Check Circle</option>
                        <option value="fas fa-upload">Upload</option>
                        <option value="fas fa-plus">Plus</option>
                        <option value="fas fa-calendar">Calendar</option>
                        <option value="fas fa-dollar-sign">Dollar</option>
                        <option value="fas fa-comment">Comment</option>
                        <option value="fas fa-clock">Clock</option>
                        <option value="fas fa-bell">Bell</option>
                        <option value="fas fa-star">Star</option>
                    </select>
                </div>
                <div class="pj-row">
                    <label for="update-type">Update Type</label>
                    <select id="update-type" name="updateType" class="pj-input" required>
                        <option value="update">General Update</option>
                        <option value="feedback">Client Feedback</option>
                        <option value="delivery">Delivery</option>
                        <option value="create">Project Created</option>
                        <option value="meeting">Meeting</option>
                        <option value="payment">Payment</option>
                        <option value="milestone">Milestone</option>
                    </select>
                </div>
                <div class="pj-actions">
                    <button type="button" class="btn secondary" id="update-cancel-btn">Cancel</button>
                    <button type="submit" class="btn primary" id="update-save-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script src="script.js"></script>
</body>
</html>